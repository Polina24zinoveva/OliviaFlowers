<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <link rel="icon" href="icon_logo.png" type="image/x-icon">
  <title>Olivia Flowers</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

  <style>
        /* Стили для фона */
        .container-fluid, .navbar-custom{
            background-color: #f0eade;
        }

        .product{
            margin-top: 2rem;
            max-width: 18rem; /* Максимальная ширина карточки */
        }

        .image img{
            height: 18rem;
            border-radius: 7px;
        }

        .image{
            margin-bottom: 10px;
        }

        .custom-link {
            font-size: 1.05rem; /* Размер шрифта */
            color: #333;
            text-decoration: none;
        }

        .container{
            margin-top: 4rem;
            margin-bottom: 4rem;
        }

        .sideMargin{
            margin-left: 2rem;
            margin-right: 2rem;
        }

        .sideMarginRight{
            padding-right: 3rem;
        }

        .verticalMargin{
            margin-top: 1rem;
            margin-bottom: 1rem;
        }


        .card-link {
            margin-bottom: .75rem; /* Отступ снизу */
            font-size: 1.25rem; /* Размер шрифта */
            font-weight: 500; /* Жирность шрифта */
            color: #333;
            text-decoration: none;
        }

        .card-link-name {
            font-size: 1.25rem; /* Размер шрифта */
            color: #333;
            text-decoration: none;
        }

        /* Для футера внизу страницы: html, body, wrapper*/
        html, body {
            height: 100%;
        }
        .wrapper {
            flex-grow: 1;
        }

        .price-filter {
            border: 1px solid #e0e0e0;
            padding: 20px;
            border-radius: 8px;
        }
        .price-filter h5 {
            font-weight: bold;
        }
        .price-filter .input-group {
            margin-bottom: 1rem;
        }
        .price-filter .form-check-label {
            font-weight: normal;
        }
        .price-filter .form-check-input:checked ~ .form-check-label {
            color: #007bff;
        }

        /* Стили для удаления кнопок увеличения и уменьшения в input type number */
        input[type=number]::-webkit-outer-spin-button,
        input[type=number]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type=number] {
            -moz-appearance: textfield;
        }

        .info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin-bottom: 10px;
        }

        /* Добавленный класс активности для выбранной категории */
        .category-link.active {
            text-decoration: underline; /* Подчеркиваем выбранную категорию */
        }

        .btn-custom {
            width: 100%;
            margin-top: 10px;
            background-color: #f0eade; /* Основной цвет кнопки */
            border-color: #f0eade; /* Цвет границы кнопки */
            color: #333; /* Цвет текста кнопки */
        }

        .btn-custom:hover {
            color: #333; /* Цвет текста кнопки */
            background-color: #e0d8d0; /* Цвет кнопки при наведении */
            border-color: #e0d8d0; /* Цвет границы кнопки при наведении */
        }


    </style>
</head>

<body class="d-flex flex-column h-100">
<div class="wrapper flex-grow-1">
  <#if isAdmin?? && isAdmin == true>
  <#include "blocks/headerAdmin.ftlh">
  <#else>
  <#include "blocks/header.ftlh">
</#if>
</div>

<div class="container">
  <#if allBouquets??>
  <div class="row">
    <div class="col-md-3 sideMarginRight">
      <h6 for="typeRecipient" class="form-label" style="margin-top: 0.5rem;">Категория:</h6>
      <div class="sideMargin" style="padding-top: 1rem;">
        <p><a class="custom-link category-link" href="/catalog">Все букеты</a></p>
        <p><a class="custom-link category-link" href="/authorBouquet">Авторские букеты</a></p>
        <p><a class="custom-link category-link" href="/boxBouquet">Композиции в коробках и корзинах</a></p>
        <p><a class="custom-link category-link" href="/weddingBouquet">Свадебный декор</a></p>
        <p><a class="custom-link category-link" href="/catalogPostcard">Открытки</a></p>
      </div>
      <script>
                        // Получаем текущий путь
                        var currentPath = window.location.pathname;

                        // Получаем все ссылки категорий
                        var categoryLinks = document.querySelectorAll('.category-link');

                        // Проходим по каждой ссылке
                        categoryLinks.forEach(function(link) {
                            // Если текущий путь совпадает с атрибутом href этой ссылки
                            if (link.getAttribute('href') === currentPath) {
                                // Добавляем класс активности
                                link.classList.add('active');
                            }
                        });
                    </script>

      <br>
      <form action="/filterBouquets" method="get">
        <h6 class="form-label">Сортировка:</h6>
        <select name="sort" id="typeRecipient" class="form-control">
          <option value="0">По умолчанию</option>
          <option value="1">По возрастанию цены</option>
          <option value="2">По убыванию цены</option>
        </select>

        <br>
        <div>
          <h6>Цена <i class="bi bi-info-circle"></i></h6>
          <div class="input-group mb-3">
            <input type="number" name="minPrice" class="form-control" min="0" max="100000000" placeholder="от ${minPrice}">
            <input type="number" name="maxPrice" class="form-control" min="1" max="100000000" placeholder="до ${maxPrice}">
          </div>
          <div class="form-check sideMargin verticalMargin">
            <input class="form-check-input" type="checkbox" name="priceRangeSmall" id="price1" value="0-2000">
            <label class="form-check-label" for="price1">
              до 2000 ₽
            </label>
          </div>
          <div class="form-check sideMargin verticalMargin">
            <input class="form-check-input" type="checkbox" name="priceRangeAverage" id="price2" value="2000-4000">
            <label class="form-check-label" for="price2">
              2000–4000 ₽
            </label>
          </div>
          <div class="form-check sideMargin verticalMargin">
            <input class="form-check-input" type="checkbox" name="priceRangeBig" id="price3" value="4000-999999999">
            <label class="form-check-label" for="price3">
              от 4000 ₽
            </label>
          </div>
          <button type="submit" class="btn btn-custom mt-3">Применить</button>

        </div>
      </form>
      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz4fnFO9gybBogGz5oCJ6pFYQ4IHg8DUi4zxtqDShTZ7H25QpYaetFG8L" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-ho+j7jyWK8fNodH5t+1/s+M8fvr57Xj9sx1ztf5d1D3+6sni5BRp8FJaWwMGTOs3" crossorigin="anonymous"></script>
    </div>
    <div class="col-md-9">
      <h4>${title}</h4>
      <div class="row">
        <#list allBouquets as bouquet>
        <div class="col-md-4">
          <div class="product">
            <a href="/bouquet/${bouquet.id}" class="image">
              <img src="/images/${bouquet.images[0].id}" alt="Фото">
            </a>
            <div class="info">
              <a href="/bouquet/${bouquet.id}" class="card-link-name">${bouquet.name}</a>
              <div>${bouquet.price}</div>
            </div>
          </div>
        </div>
      </#list>
    </div>
  </div>
</div>

<#else>
<div class="row">
  <div class="col-md-3 sideMarginRight">
    <h6 for="typeRecipient" class="form-label" style="margin-top: 0.5rem;">Категория:</h6>
    <div class="sideMargin" style="padding-top: 1rem;">
      <p><a class="custom-link category-link" href="/catalog">Все букеты</a></p>
      <p><a class="custom-link category-link" href="/authorBouquet">Авторские букеты</a></p>
      <p><a class="custom-link category-link" href="/boxBouquet">Композиции в коробках и корзинах</a></p>
      <p><a class="custom-link category-link" href="/weddingBouquet">Свадебный декор</a></p>
      <p><a class="custom-link category-link" href="/catalogPostcard">Открытки</a></p>
    </div>
    <script>
                        // Получаем текущий путь
                        var currentPath = window.location.pathname;

                        // Получаем все ссылки категорий
                        var categoryLinks = document.querySelectorAll('.category-link');

                        // Проходим по каждой ссылке
                        categoryLinks.forEach(function(link) {
                            // Если текущий путь совпадает с атрибутом href этой ссылки
                            if (link.getAttribute('href') === currentPath) {
                                // Добавляем класс активности
                                link.classList.add('active');
                            }
                        });
                    </script>

    <br>

  </div>
  <div class="col-md-9">
    <h4>${title}</h4>
    <div class="row">
      <#list allPostcards as Postcards>
      <div class="col-md-4">
        <div class="product">
          <a href="/Postcards/${Postcards.id}" class="image">
            <img src="/images/${Postcards.image.id}" alt="Фото">
          </a>
        </div>
      </div>
    </#list>
  </div>
</div>
</div>
</#if>
</div>
<footer class="footer mt-auto">
  <#include "blocks/footer.ftlh">
</footer>
</body>
</html>
